<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
  <h2>요청방식과 파라미터</h2>
  <button id="btn1">GET</button>
  <button id="btn2">POST</button>
  <hr />
  <div id="result"></div>
  
  <script type="text/javascript">
  let btn1 = document.querySelector("#btn1");
  let btn2 = document.querySelector("#btn2");
 
  //GET호출
  btn1.addEventListener("click", ()=>{
	 // console.log("1번");
	 let xhr = new XMLHttpRequest();
	 xhr.onreadystatechange = () => {
		 if(xhr.readyState == 4){
			 if(xhr.status == 200) {
				 let result = document.querySelector("#result");
				 result.innerHTML = xhr.responseText;
			 }
		 }
	 };
	 xhr.open("GET","test05.do?msg=hello",true);
	 xhr.send();
  });
  
  
  //POST호출 (등록은 post 선호)
  //파라미터 send 메서드의 매개변수에 설정한다
  //header값 설정이 필요하다
  btn2.addEventListener("click", ()=>{
	  //console.log("2번");
	 let xhr = new XMLHttpRequest();
	 xhr.onreadystatechange = () => {
		 if(xhr.readyState == 4){
			 if(xhr.status == 200) {
				 let result = document.querySelector("#result");
				 result.innerHTML = xhr.responseText;
			 }
		 }
	 };
	 xhr.open("POST","test05.do",true);
	 
	 //header설정
	 //form 태그의 enctype 의 디폴트값 갖고오기
	 //이렇게 설정해줘야 post방식일 때 파라미터가 전송된다.
	 xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
	 
	 xhr.send("msg=hello");
	  
  });
  
  
  </script>
  <form enctype="application/x-www-form-urlencoded"></form>

</body>
</html>